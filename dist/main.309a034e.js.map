{"version":3,"sources":["main.js"],"names":["buttonlist","document","querySelector","show","pause","play","replay","stop","triggerButton","createEvent","initEvent","showTime","goalTime","changeTitle","keywords","keyArray","split","tick","intervalId","setInterval","Promise","resolve","then","push","shift","title","join","clearInterval","addClass","target","indexOf","id","classList","add","remove","removeClass","x","setTimeout","timeObj","init","clear","i","render","timer","confirm","hour","minute","second","textContent","call","dispatchEvent","bind","addEventListener","e","console","log","onclick","Object","freeze"],"mappings":"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","file":"main.309a034e.js","sourceRoot":"..\\src","sourcesContent":["const buttonlist = document.querySelector(\".buttonList\");\r\nconst show = document.querySelector(\".show\");\r\nconst pause = document.querySelector(\"#pause\");\r\nconst play = document.querySelector(\"#play\");\r\nconst replay = document.querySelector(\"#replay\");\r\nconst stop = document.querySelector(\"#stop\");\r\nlet triggerButton = document.createEvent(\"HTMLEvents\");\r\ntriggerButton.initEvent(\"click\", false, false);\r\nlet showTime = [0, 0, 0];\r\nconst goalTime = [0, 40, 0];\r\n\r\nconst changeTitle = function() {\r\n    const keywords = \"到点了！到点了！起来运动啦！起来运动啦！\";\r\n    let keyArray = keywords.split(\"\");\r\n    let tick = 0;\r\n    const tempF = function() {\r\n        return new Promise(resolve => {\r\n            resolve();\r\n        }).then(() => {\r\n            tick++;\r\n            keyArray.push(keyArray.shift());\r\n            document.title = keyArray.join(\"\");\r\n            if (tick === 80) {\r\n                clearInterval(intervalId);\r\n                document.title = \"计时器\";\r\n            }\r\n        });\r\n    };\r\n    const intervalId = setInterval(tempF, 30);\r\n};\r\nconst addClass = function(target) {\r\n    const selectButton = [\"stop\", \"pause\"];\r\n    if (selectButton.indexOf(target.id) >= 0) {\r\n        target.classList.add(\"selected\");\r\n        target.classList.remove(\"normal\");\r\n    }\r\n};\r\nconst removeClass = function(x) {\r\n    const target = document.querySelector(\".selected\");\r\n    if (target && target.id !== x) {\r\n        target.classList.remove(\"selected\");\r\n        target.classList.add(\"normal\");\r\n        target.classList.add(\"animation-once\");\r\n        setTimeout(() => {\r\n            target.classList.remove(\"animation-once\");\r\n        }, 3000);\r\n    }\r\n};\r\nconst timeObj = {\r\n    intervalId: null,\r\n    init() {\r\n        this.clear();\r\n        document.querySelector(\".strong\") &&\r\n            document.querySelector(\".strong\").classList.remove(\"strong\");\r\n        for (let i = 0; i < 3; i++) {\r\n            showTime[i] = goalTime[i];\r\n        }\r\n        this.render();\r\n        this.timer();\r\n    },\r\n    clear() {\r\n        if (this.intervalId) {\r\n            clearInterval(this.intervalId);\r\n            this.intervalId = null;\r\n        }\r\n    },\r\n    play() {\r\n        if (this.intervalId) {\r\n            this.clear();\r\n            const answer = confirm(\"当前正在计时，确定要重置吗？\");\r\n            answer ? this.init() : this.render() && this.timer();\r\n        } else if (\r\n            showTime[0] === 0 &&\r\n            showTime[1] === 0 &&\r\n            showTime[2] === 0\r\n        ) {\r\n        } else {\r\n            this.timer();\r\n        }\r\n    },\r\n    stop() {\r\n        this.clear();\r\n        for (let i = 0; i < 3; i++) {\r\n            showTime[i] = goalTime[i];\r\n        }\r\n        this.render();\r\n    },\r\n    render() {\r\n        let hour, minute, second;\r\n        if (showTime[2] < 10) {\r\n            second = \"0\" + showTime[2];\r\n        } else {\r\n            second = \"\" + showTime[2];\r\n        }\r\n        if (showTime[1] < 10) {\r\n            if (showTime[0] < 10 && showTime[0] > 0) {\r\n                hour = \"0\" + showTime[0];\r\n            } else if (showTime[0] === 0) {\r\n                hour = \"0\" + showTime[0];\r\n                show.classList.add(\"strong\");\r\n            } else {\r\n                hour = \"\" + showTime[0];\r\n            }\r\n            minute = \"0\" + showTime[1];\r\n        } else {\r\n            if (showTime[0] < 10) {\r\n                hour = \"0\" + showTime[0];\r\n            } else {\r\n                hour = \"\" + showTime[0];\r\n            }\r\n            minute = \"\" + showTime[1];\r\n        }\r\n        show.textContent = hour + \":\" + minute + \":\" + second;\r\n    },\r\n    timer() {\r\n        this.intervalId = setInterval(\r\n            function() {\r\n                if (\r\n                    showTime[0] === showTime[1] &&\r\n                    showTime[1] === showTime[2] &&\r\n                    showTime[2] === 0\r\n                ) {\r\n                    this.render();\r\n                    changeTitle.call(this);\r\n                    document.title = \"计时器\";\r\n                    replay.dispatchEvent(triggerButton);\r\n                    clearInterval(this.intervalId);\r\n                } else {\r\n                    if (--showTime[2] === -1) {\r\n                        if (--showTime[1] === -1) {\r\n                            if (--showTime[0] === -1) {\r\n                                showTime[0]++;\r\n                                showTime[1]++;\r\n                            } else {\r\n                                showTime[1] += 60;\r\n                            }\r\n                        } else {\r\n                            showTime[2] += 60;\r\n                        }\r\n                    }\r\n                    this.render();\r\n                }\r\n            }.bind(this),\r\n            1000\r\n        );\r\n    }\r\n};\r\nbuttonlist.addEventListener(\"click\", function(e) {\r\n    switch (e.target) {\r\n        case pause:\r\n            timeObj.clear();\r\n            removeClass(\"pause\");\r\n            addClass(e.target);\r\n            break;\r\n        case play:\r\n            timeObj.play();\r\n            removeClass();\r\n            break;\r\n        case stop:\r\n            timeObj.stop();\r\n            removeClass(\"stop\");\r\n            addClass(e.target);\r\n            break;\r\n        default:\r\n            console.log();\r\n    }\r\n});\r\nreplay.onclick = function() {\r\n    setTimeout(() => {\r\n        removeClass();\r\n        console.log(\"这里是replay\");\r\n        timeObj.stop();\r\n        timeObj.init();\r\n    }, 1000);\r\n};\r\nObject.freeze(goalTime);\r\ntimeObj.init();\r\n"]}